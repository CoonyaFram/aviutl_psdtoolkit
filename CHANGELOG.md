# Changelog

0.1 系から 0.2 系へは大幅な変更があるため、そのまま上書きでの更新は行なえません  
プロジェクトファイルの互換性もないため、編集中のプロジェクトの移行はできません

## 0.2beta13

**0.2beta13 には以前のバージョンと互換性がない変更を含みます。  
アップグレードや既存プロジェクトの移行はできません。**

- Assign@PSDToolKit アニメーション効果を廃止
  - 全ての初期化をテキストオブジェクトで行うようにし、「オブジェクト描画」は必須にした
  - 縮小率やオフセットの設定を「オブジェクト描画」側に移動
  - 「オブジェクト描画」に「反転」のプロパティを追加
  - 描画処理における無駄な処理を削減
    - 大抵のケースでは書き出し時間に対する影響は軽微
    - 拡張編集の環境設定にある「画像データのキャッシュ数」が同時に使用している数以下の時は効果が薄いです
- PSDToolKit.exe 側に新たなキャッシュ機構を追加
  - 口パクのように頻繁に同じ描画構成に戻るようなケースでの描画効率が向上
- パラメータ設定ダイアログで使用可能な文字数を稼ぐため、アニメーション効果の変数名などを圧縮
  - 変数名を変更したことにより同じプロジェクトでも設定が引き継げなくなった
- 上記2件の影響で互換性が維持できなくなったので、ついでに色々変更
  - アニメーション効果の名前を変更など
- 設定の変数名を整理
  - `P.wav_lipsync` の設定方法を整数値に変更
  - `P.wav_insertmode` を `P.wav_subtitle` に改名
  - `P.wav_groupsubtitle` を `P.wav_subtitle_group` に改名し設定方法を整数値に変更
  - `P.wav_subtitleencoding` を `P.wav_subtitle_encoding` に改名
  - `P.wav_subtitlemargin` を削除
  - `P.wav_lipsync_group`, `P.wav_mpslider_group` を新設
  - `P.wav_lipsync_offset` を新設
  - `P.wav_mpslider_margin_left`, `P.wav_mpslider_margin_right` を新設
  - `P.wav_subtitle_margin_left`, `P.wav_subtitle_margin_right` を新設
- 口パク準備があるレイヤー番号の指定方法を変更
  - スライダーへのエクスポート時に扱いが厄介だったので多目的スライダーと同じ方法に変更
- 口パク あいうえおの子音処理モード1を再実装
  - ついでにデフォルト値を子音処理モード1に変更
- 目パチや口パクの設定内容に問題があるときはエラーメッセージを表示するように変更
- エイリアス「口パク準備 設定上書き」を追加
  - 複数のレイヤーに対してひとつのオブジェクトで上書きできるように改良
- 使い方の基本方針を変更
  - ひとつのオブジェクトにアニメーション効果を積む方法を主軸とするように変更
  - 以前の使い方も可能だが、拡張編集の仕様を知らずにミスる人が多いので推奨しない方向に変更
  - PSD のレイヤー切り替えなどに関わるアニメーション効果のエイリアスファイルを削除
  - 新しい方針に合わせて説明書を整理
- 説明書にチュートリアルを追加
  - 意図的に Why に言及しないように記述したものを書き下ろし
  - 他のページでの記述をただのオブジェクトのリファレンスという形に変更
- PSDToolKit ウィンドウで `Ctrl + S` を「送る」ボタンに割り当て
- プロジェクト内の PSD ファイルが一部見つからなくても処理を続行するように改善
- subobj アニメーション効果「相対移動」を追加
- `*.wav` ファイルをドロップした時のテキストの内部処理を UTF-8 に変更
- 「PSDToolKit 環境設定」ダイアログを追加
  - 一部の設定変更を GUI で行えるように
  - `setting.lua` が作成されている場合はそちらの設定が優先されます
- ごちゃまぜドロップスを 0.3rc へ更新

## 0.2beta12

- 拡張編集RAMプレビューを 0.3rc へ更新
- 拡張描画の「中心X」「中心Y」が使えなかったのを修正
  - 既存のプロジェクトで PSD ファイルを読み込んでいるオブジェクトは文字のアラインメントを `中央揃え[中]` に変更してください
  - 上記作業を行わないと描画位置がずれます

## 0.2beta11

- お気に入りのアイテムが適用できないことがあるのを修正

## 0.2beta10

- 文字数制限に関してのより詳しい説明を説明書に追加

## 0.2beta9

- 同じフォルダー内に同じ名前のレイヤーがある時に上手く動かないのを修正

## 0.2beta8

- 拡張編集RAMプレビューを 0.3beta13 へ更新
- レイヤー名コピー及びその周辺機能を実装
  - レイヤー名を右クリックすると、シンプルビューとほぼ同じメニューが出ます
  - コピーされた文字列はスライダーの値コピーと同じように使用可能です
  - 合わせてドキュメントの構成をこの機能を中心に改定
- 「多目的スライダー」機能を新規追加
  - これに合わせてスライダーをエクスポートした時のソースコードも修正
    - 既にエクスポートしていたものは再エクスポートするか、以下のように書き換えることで対応可能です  
    `PSD:addstate(values[obj.track0])` -> `PSD:addstate(values, obj.track0)`
    - この変更を行わなくてもスライダーの機能に影響はありませんが、「多目的スライダー」でのコントロールはできません
- 「字幕表示」用のテキストアニメーション効果で使える変数名を以下に変更
  - `subtitle.frame` -> `subobj.frame`
  - `subtitle.time` -> `subobj.time`
  - `subtitle.totalframe` -> `subobj.totalframe`
  - `subtitle.totaltime` -> `subobj.totaltime`
  - これは「多目的スライダー」でも同じスクリプトを使用できるようにするための変更です
  - v0.2beta8 へバージョンアップを行う際は「字幕表示」を作り直すことで対応可能です
- アニメーション効果「回転して登場」「ぼよん」を追加
- チャンネルストリップに「Aux1SPan」「左右」を追加
  - Aux1Send とメイン出力でそれぞれの左右の定位を変更できます
- チャンネルストリップのルーティングを変更
  - Aux1Send の音量が「出力音量」に依存しなくなりました
- エイリアス「字幕準備」を追加
  - 一貫性を持たせるため
  - どこかのタイミングでエイリアスの名前を整理したい……
- `*.wav` のドロップ時に `口パク準備` を作成しないオプションを追加

## 0.2beta7

- ドキュメントにスライダー用スクリプト生成補助ツールを追加
- ドキュメントに「よくある質問」の項目を追加
- 「口パク 開閉のみ」の処理を再実装

## 0.2beta6

- 拡張編集RAMプレビューを 0.3beta12 へ更新

## 0.2beta5

- 口パク準備がない時でも「閉じ」を適用するかを選択可能にした
- 「準備レイヤ」のパラメーター名は直感的ではないので「口パク準備」「字幕準備」に変更

## 0.2beta4

- 拡張編集RAMプレビューを 0.3beta8 へ更新
- 設定値コピーで使えない文字が含まれる時のエスケープ方法を改善
- 設定値が長すぎると保存されない問題についてドキュメントに記載

## 0.2beta3

- チャンネルストリップが不必要に重くなることがあったのを修正

## 0.2beta2

- ドキュメントの間違いを修正
- 拡張編集RAMプレビューを 0.3beta4 へ更新
- レイヤーサムネイルの切り出しを改善

## 0.2beta

- ドキュメントを追加
- PSDToolKit ウィンドウの GUI を改善
  - マウスの移動量を減らすため「送る」ボタンを左上に移動
  - 左上のコンボボックスを廃止し「編集中の PSD ファイル」の概念を導入
    - 左端に「編集中の PSD ファイル」一覧をタブで表示
    - プロジェクトファイル(*.aup) に「編集中の PSD ファイル」を保存する機能を実装
    - 拡張編集タイムラインへの PSD ファイルドロップ時に「編集中の PSD ファイル」を追加
    - 右上に「編集中の PSD ファイルを閉じる」ボタンを追加
  - シンプルビューの設定コピーボタンとスライダーエクスポートボタンを統合
    - ボタンを押すとメニューを表示し、コピーとエクスポートを選択できる形に変更
    - AviUtl 側でパラメーター設定ダイアログを開いている時は直接割り当てられる機能を追加
    - スライダーの設定値コピーで難解な設定値を読みやすい形に変更
    - ついでにスライダーをエクスポートした後に編集しやすいよう内容を調整
- 設定のカスタマイズ用に新しいメカニズムを導入
  - 今後のバージョンアップ時に設定が失われない予定です
- 口パクでアニメーション速度の値を大きくした時に期待通りに動かないのを緩和
  - 根本的な原因はプレビューにおけるコマ飛びなので書き出し後の結果は以前と同じ
  - 1秒までのコマ飛びは許容するように変更
  - 問題を回避するための選択肢を増やすために[拡張編集RAMプレビュー](https://github.com/oov/aviutl_rampreview/releases)も同梱
- 目パチの間隔をフレーム単位から秒単位に変更
  - 30fpsでも60fpsでも近い動作になるように
- 口パク準備の設定用パラメーターを一括で上書きする手段を追加
  - `LIPSYNC={locut=100, hicut=1000, threshold=20}` をグローバルに置くと読みます
- 字幕用のテキストアニメーション「字幕表示フェード」を追加
  - 実質的な代替機能ができたので筋が悪い「テキスト　字幕表示用・文字送り」を削除
- 口パクや字幕表示用オブジェクトでの準備レイヤー指定を必須に変更
  - 設定ミスによる「関係ないキャラが口パクする」というような事故を減らすため
- 口パク準備の「編集全体の音声を元にする」オプションを廃止
  - 実用性が低いため
- `*.wav` ファイルのドロップ時に `*.lab` ファイルを優先的に使う機能を削除
  - 同じ名前の `*.lab` ファイルがあれば常に読み込むようにした
- 口パク準備の「レイヤー節約モード」を削除
  - 実用性が低いため
  - 合わせて口パク準備のアニメーション効果バージョンも削除
- 内部処理を整理するため Lua を全面的に書き直し
  - PSDToolKitBridge.dll での処理失敗時はエラーを返すように改善
- ファイル名を変更
  - README.txt を PSDToolKit.txt に改名
  - PSDToolKit.dll を PSDToolKitBridge.dll に改名
  - PSDToolKitLib.lua を PSDToolKit.lua に改名

## 0.1.3

- Instant CTalk のキャスト選択を保持

## 0.1.3beta8 2018-01-20

- ラジオグループの一部にだけフィルターが設定されている時、ブラウザー版と挙動が異なっていたのを修正

## 0.1.3beta7 2018-01-19

- 一部の処理で文字化けすることがあったのを修正

## 0.1.3beta6 2018-01-17

- PSDToolKit.exe 起動失敗時のエラーメッセージを改善

## 0.1.3beta5 2018-01-17

- ごちゃまぜドロップスを 0.3beta2 へ更新
- Instant CTalk を追加
- psdtoolkit_lab.lua の文字コードが間違っていたのを修正

## 0.1.3beta4 2018-01-05

- 口パクで準備レイヤーを指定できるように改善
- 「口パク あいうえお」に新たな子音処理方法を追加
- ラベルファイル(*.lab)のドロップに対応  
１フレーム未満の長さになる音素はスキップされます
- 動作環境を満たしているかチェックする機構を追加

## 0.1.3beta3 2018-01-02

- ごちゃまぜドロップスを 0.2.3 へ更新
- Lua スクリプトでの処理を一部整理
- レイヤー名が2文字の時に独自拡張機能が動かないバグを修正

## 0.1.3beta2 2017-11-17

- ごちゃまぜドロップスを 0.2.2 へ更新

## 0.1.3beta 2017-11-03

- チャンネルストリップのパラメータ名を整理
- Aux1 チャンネルストリップを追加
- センドエフェクト機構を追加
- リバーブを追加
- *.wav や *.srt のドロップ時にエイリアスファイルを動的に切り替える機構を追加

## 0.1.2 2017-11-03

- GC間隔を調整
- ごちゃまぜドロップスを 0.2.1 へ更新

## 0.1.2rc5 2017-10-25

- :flipx:flipy を指定したレイヤーが正しく処理されなかったのを修正

## 0.1.2rc4 2017-10-06

- 「口パク準備」をアニメーション効果として挿入できるように追加
- *.wav ドロップ時の字幕の長さのデフォルト値を音声と同じに変更
- 字幕用テキスト周辺のスクリプトをタイムラインにべた書きしないよう変更  
（バージョンアップの度にタイムライン上のアイテムを差し替えなくていいようにするため）
- 「テキスト　字幕表示用・文字送り」を追加
- ごちゃまぜドロップスを 0.2 へ更新

## 0.1.2rc3 2017-09-28

- 「テキスト　字幕表示用」で余計な \ が表示されることがあったのを修正
- オーディオファイルを1フレーム分長く exo に書き出してしまっていたのを修正
- 字幕ファイル(*.srt)のドロップに対応。CeVIO CS6 以降などで書き出せます

## 0.1.2rc2 2017-09-27

- ごちゃまぜドロップスを 0.2rc4 へ更新

## 0.1.2rc 2017-09-26

- レイヤー名の文字コード検出処理を PSDTool と同等のものに修正
- *.psb ファイルも読み込めるように修正
- レイヤーの表示／非表示を切り替えた時に親レイヤーを表示
- リリースファイルにごちゃまぜドロップス関連ファイルを追加
- ごちゃまぜドロップス用のイベントハンドラースクリプトを追加

## 0.1.1 2017-09-17

- 0.1.1 正式リリース

## 0.1.1rc 2017-09-17

- PSDToolKit.exe で不定期にクラッシュする問題を回避
- レイヤー一覧にサムネイルを表示

## 0.1.1beta 2017-09-16

- PSDToolKit.auf がウィンドウ表示に失敗した時に、PSDToolKit.exe から受け取ったエラーメッセージを表示するように改善
- exedit.auf が plugins ディレクトリに置かれていても正しくロードできるように修正
- PSDToolKit.exe で OpenGL を使うのを廃止、GDI+ でのレンダリングに切り替え（まだ不安定でたまにクラッシュする）

## 0.1 2017-09-09

- 初版
