# 音声フィルタについて

音声は PSD ファイルとは直接関係あるものではありませんが、PSD ファイルを使った動画制作では音声に合わせた口パクなどを行う中で音声処理が必要になることもあるため、PSDToolKit にはそのための補助機能があります。

拡張編集では音声に対して行える操作は少なく、オーディオを扱うことを主軸としたソフトのようにイコライザーなどを使うことはできませんが、イコライザーやコンプレッサーなどで音量をコントロールできるとバランスの取れた動画が作りやすくなります。

また、動画を編集する上で複数の音声を合成していく場合、音割れ防止用にマスターにリミッターを入れたりできると便利です。

PSDToolKit では `チャンネルストリップ` / `チャンネルストリップ - Aux` / `チャンネルストリップ - マスター` という、上記を実現するための AviUtl プラグインを提供しています。

# チャンネルストリップ

`チャンネルストリップ` は拡張編集上の音声に対してエフェクトをかける機能を提供するフィルタオブジェクトです。

`チャンネルストリップ` は拡張編集の右クリックメニューから `フィルタオブジェクトの追加`→`チャンネルストリップ` で挿入できます。  
ただし、`ID` を `0` 以上に変えるまでは機能しません。

プロパティ名|説明
---|---
`ID`|`チャンネルストリップ` を識別する番号を指定します。<br>`チャンネルストリップ` を使用する時は、同じ時間軸で重複しない `0` 以上の `ID` を指定する必要があります。<br>つまり縦に `ID: 0` が２つあるのはまずいですが、横に `ID: 0` が２つあるのは問題ありません。
`入力音量`|エフェクターに通す前の音量を指定します。
`遅延`|音声を遅らせる時間をミリ秒でします。
`EQ LoFreq`|イコライザーで音量調整したい周波数帯を指定します。
`EQ LoGain`|`EQ LoFreq` で指定した周波数帯の音量を調整します。
`EQ HiFreq`|イコライザーで音量調整したい周波数帯を指定します。
`EQ HiGain`|`EQ HiFreq` で指定した周波数帯の音量を調整します。
`C Thresh`|コンプレッサーのスレッショルド（どの程度の大きさを超えたらコンプレッサーで圧縮するか）を指定します。
`C Ratio`|コンプレッサーのレシオ（どの程度圧縮するか）を指定します。
`C Attack`|コンプレッサーのアタック（どのぐらいの速さで音量が圧縮されるか）を指定します。
`C Release`|コンプレッサーのリリース（どのぐらいの速さで音量が戻るか）を指定します。
`Aux ID`|送り先の `チャンネルストリップ - Aux` の ID を指定します。
`Aux Send`|`チャンネルストリップ - Aux`に送る音の大きさを指定します。
`出力音量`|エフェクターに通した後の音量を指定します。
`左右`|左右の定位を指定します。

全ての設定は初期値では何も行わないようになっています。

なお AviUtl のメインメニューから `設定`→`チャンネルストリップの設定` を選ぶと、現在のフレームにおける設定値を単位付きで確認できます。

# チャンネルストリップ - Aux

`チャンネルストリップ - Aux` はセンドエフェクトの仕組みを実現するためのフィルタオブジェクトです。

現在はリバーブのみが実装されています。

プロパティ名|説明
---|---
`ID`|`チャンネルストリップ - Aux` を識別する番号を指定します。<br>`チャンネルストリップ - Aux` を使用する時は、同じ時間軸で重複しない `0` 以上の `ID` を指定する必要があります。<br>つまり縦に `ID: 0` が２つあるのはまずいですが、横に `ID: 0` が２つあるのは問題ありません。
`R Preset`|リバーブの設定をプリセットから選択します。<br>どんな感じに変わるのかをとりあえず試したい場合に有用です。<br>`-1` - プリセットを使用しない<br>`0` - 部屋<br>`1` - 教会<br>※プリセットの使用中は `R Wet` 以外のパラメーターは機能しません。
`R PreDly`|リバーブの残響が始まるまでの時間です。
`R LPF`|リバーブの残響に対するローパスフィルターです。
`R Diffuse`|リバーブの残響が拡散していく強さです。
`R Decay`|リバーブの残響が収束していく速さです。<br>値を大きくすると収束しないため、動画を最初から再生した場合と途中から再生した場合で残響の残り方に違いが現れます。
`R Damping`|リバーブの拡散が収束していく速さです。
`R Excursion`|リバーブの残響に少しうねりを加えます。
`R Wet`|リバーブの音量です。

## 注意事項

`チャンネルストリップ - Aux` は `音声波形表示` などと相性が悪く、残響の音がおかしくなりますが、これは仕様です。

## チャンネルストリップ - Auxの使い方

`チャンネルストリップ - Aux` は拡張編集の右クリックメニューから `フィルタオブジェクトの追加`→`チャンネルストリップ - Aux` で挿入できます。
ただし、`ID` を `0` 以上に変えるまでは機能しません。

なお `チャンネルストリップ - Aux` はそれ単体では機能せず、`チャンネルストリップ` から音声データを送ることによって動作します。  
同じ時間軸上にある `チャンネルストリップ` の `Aux ID` と `チャンネルストリップ - Aux` の `ID` を 0 以上で同じ値にして、更に `チャンネルストリップ` の `Aux Send` の値を上げることで音声データを `チャンネルストリップ - Aux` に流すことができます。

# チャンネルストリップ - マスター

`チャンネルストリップ - マスター` は内部で自動的に使われているフィルタであるため、手動で挿入することはできません。

`チャンネルストリップ` で加工した各トラックのデータなどを `チャンネルストリップ - マスター` が合成することでひとつの音声として出力します。

また、`チャンネルストリップ - マスター` にはリミッターが内蔵されており、音が割れそうな時は全体の音量を下げることで音が割れるのを回避しようとします。
