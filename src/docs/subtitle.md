# 字幕について

字幕は PSD ファイルとは直接関係あるものではありませんが、PSD ファイルを使った動画制作では字幕の表示も合わせて行うことが少なくないため、PSDToolKit には字幕の表示に関する補助機能があります。

拡張編集の標準機能でテキストを表示することはできますが、音声に合わせて字幕を表示したい場合は表示する時間の設定などを毎回行うことになり、手間が少なくありません。

また、フォント設定や表示する位置などは個々の `テキスト` オブジェクトが保持しているため、これらを変更する作業はどうしても煩雑になりがちです。

PSDToolKit では `字幕準備` と `字幕表示` という仕組みを提供しており、これによりある程度煩雑さを回避することができます。

## `字幕準備` の使い方

`字幕準備` の実体はスクリプトが記述されたただの `テキスト` オブジェクトです。  
このドキュメントでは便宜上これを `字幕準備` と呼びます。

`字幕準備` は拡張編集の右クリックメニューから `メディアオブジェクトの追加`→`PSDToolKit`→`字幕準備` で挿入できます。

![`字幕準備` の作成方法](assets/subtitle-pre.png)

「セリフ」の部分にセリフとして使用したいテキストを記述します。

改行なども使えますが、`]==]` というテキストだけは使えません。  
その場合は代わりに `]==].."]==]"..[==[` と入れると使えます。

なお、`字幕準備` はその名の通り **準備を行うためのオブジェクト** なので、これ単体では何もできません。

### 字幕準備を効率よく作成するには

音声に合わせて字幕を表示したいケースにおいては音声が流れている時間とほぼ同じ区間に字幕準備を配置したいはずなので、PSDToolKit ではより簡単に `字幕準備` を作成できる方法を提供しています。

詳しくは [ドラッグ＆ドロップ拡張の `*.wav` ファイル](gcmzdrops.md#*.wav_ファイル) の項を参照してください。

## `字幕表示` の使い方

`字幕準備` で設定したテキストは、字幕表示を行うための `テキスト` オブジェクトを使って表示します。  
このドキュメントでは便宜上これを `字幕表示` と呼びます。

`字幕表示` を挿入するには拡張編集の右クリックメニューから `メディアオブジェクトの追加`→`PSDToolKit`→`テキスト　字幕表示用` を選びます。

![`テキスト　字幕表示用` の挿入後](assets/subtitle-disp.png)

`字幕表示` が挿入された状態のスクリーンショットです。

このスクリーンショットでは `字幕準備` のオブジェクトが置かれているのは `Layer 3` なので、`字幕表示` 側で `layer = 3` として `字幕準備` の位置を指定しています。

これで `字幕準備` で設定したテキストが画面に表示されるようになり、さらに表示位置やフォント設定などは `字幕表示` 側のオブジェクトで設定できるようになりました。

### `字幕表示` でのアニメーション効果

`字幕表示` で字幕を表示すると拡張編集側が用意した `obj.time`/`obj.frame`/`obj.totaltime`/`obj.totalframe` が本来欲しい値とは異なってしまうため、これらを利用した `アニメーション効果` などは意図した動作にはならなくなってしまいます。

しかし `字幕表示` では代わりに [subobj アニメーション効果](subobj.md) を用いることで、字幕の表示時間に応じたアニメーションを行うことが可能です。

そのデモンストレーション用として PSDToolKit には [`フェード@subobj`](subobj.md#フェード@subobj) という `アニメーション効果` が付属しており、これを `字幕表示` に追加し `文字毎に個別オブジェクト` を有効にすれば、簡単にアニメーションが設定できます。
