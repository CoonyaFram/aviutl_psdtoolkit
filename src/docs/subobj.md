# subobj アニメーション効果について

`subobj アニメーション効果` とはそのオブジェクト自身の表示時間ではなく、依存している別のオブジェクトの表示時間を元にアニメーションを行うためのものです。

現在のところは [`字幕表示`](obj.md#字幕表示) と [`PSD ファイルオブジェクト`](obj.md#PSD_ファイルオブジェクト) で使用可能です。

## 仕組み

`subobj アニメーション効果` では、通常使われる `obj.time`/`obj.frame`/`obj.totaltime`/`obj.totalframe` の代わりに `subobj.time`/`subobj.frame`/`subobj.totaltime`/`subobj.totalframe` を参照することで、依存している別のオブジェクトの表示時間を得ることができます。

ただし依存している別のオブジェクトがタイムライン上に存在していない時間もあり、その場合は `subobj.notfound` が `true` なります。

登場／退場を扱うスクリプトでは、例えば以下のようにして依存しているオブジェクトが存在しない間は表示を消す必要があるかもしれません。

```lua
if subobj.notfound then
  obj.alpha = 0
  return
end
```

# フェード@subobj

字幕を1文字ずつフェードインさせる場合などに有用な `subobj アニメーション効果` です。

プロパティ名|説明
---|---
`速さ(秒)`|フェードイン／アウトする速さを秒で指定します。
`間隔(秒)`|`文字毎に個別オブジェクト` などを有効にした際にずらす時間を秒で指定します。
`拡大率`|フェード時に拡大率を変更させる場合に指定します。
`X座標`|フェード時にX座標を移動させる場合に指定します。
`フェードアウトはシンプル`|フェードアウト時に `間隔(秒)` / `拡大率` / `X座標` の設定値を無視します。

# 基本登場@subobj

フェードイン、引き伸ばし、回転などの方法でオブジェクトの登場／退場の瞬間に効果を加える `subobj アニメーション効果` です。

プロパティ名|説明
---|---
`速さ(秒)`|オブジェクトが登場する速さを秒で指定します。<br>マイナスの値を指定すると退場時の効果になります。
`間隔(秒)`|`文字毎に個別オブジェクト` などを有効にした際にずらす時間を秒で指定します。
`透明度`|指定された透明度から本来の透明度までの間でフェードインします。
`x`|チェックを入れると横方向に引き伸ばして登場します。
`y`|チェックを入れると縦方向に引き伸ばして登場します。
`rx`|X軸方向に回転する角度を `90` や `-90` などの数値で指定します。
`ry`|Y軸方向に回転する角度を `90` や `-90` などの数値で指定します。
`rz`|Z軸方向に回転する角度を `90` や `-90` などの数値で指定します。

# 相対移動@subobj

オブジェクトが登場している間だけ座標を動かす `subobj アニメーション効果` です。

プロパティ名|説明
---|---
`速さ(秒)`|オブジェクトが登場／退場する速さを秒で指定します。
`間隔(秒)`|`文字毎に個別オブジェクト` などを有効にした際にずらす時間を秒で指定します。
`透明度`|指定された透明度から本来の透明度までの間でフェードインします。
`X`|表示中にずらすピクセル数を指定します。
`Y`|表示中にずらすピクセル数を指定します。
`Z`|表示中にずらすピクセル数を指定します。
`加速`|チェックを付けると移動時に加速します。
`減速`|チェックを付けると移動時に減速します。
`登場`|チェックを付けると登場時に `速さ(秒)` で指定した時間をかけて移動します。
`退場`|チェックを付けると退場時に `速さ(秒)` で指定した時間をかけて移動します。

# ぼよん@subobj

拡大／縮小でぼよんと弾む `subobj アニメーション効果` です。

プロパティ名|説明
---|---
`長さ(秒)`|拡大／縮小が落ち着くまでの時間を指定します。
`間隔(秒)`|`文字毎に個別オブジェクト` などを有効にした際にずらす時間を秒で指定します。
`速さ(秒)`|拡大／縮小の速さを指定します。
`サイズ`|拡大／縮小の大きさを指定します。
`横位置(0-2)`|どの位置を基準に拡大／縮小するかを指定します。<br>`0` - 左<br>`1` - 中央<br>`2` - 右
`縦位置(0-2)`|どの位置を基準に拡大／縮小するかを指定します。<br>`0` - 上<br>`1` - 中央<br>`2` - 下

# XYZ反映@subobj

依存している別のオブジェクトの XYZ 座標値を加算します。

このアニメーション効果には固有のプロパティはありません。